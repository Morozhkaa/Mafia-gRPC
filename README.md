# Mafia (gRPC)

Сервис, реализующий движок игры Mafia. Взаимодействие
между клиентом и сервером обеспечивается на технологии gRPC.

### Description of the game process
* Игра на 4 игроков, имеющиеся роли: мафия, комиссар, два мирных жителя.


* Когда достаточное количество клиентов подключается к серверу, сервер принимает решение о ролях участников и уведомляет участников о них.

* Пока идет игровой день, все участники могут общаться в общем чате, либо отправлять серверу определенные команды.

* После того, как все участники отправят команду `kick [username]` (то есть проголосуют), наступит ночь.

* Ночью мафия принимает решение о том, кто умрет текущей ночью, отправляя команду `kill [username]`


#### Available commands
На каждом шаге игры участнику доступен следующий набор команд. Обязательными являются команды kick и kill, которые влияют на смену времени суток.

    help            - print this message.
    status          - print the current game status.
    msg [text]      - send a text message.
    kick [username] - vote for kick someone (available during the day).
    kill [username] - vote for kill someone (available for mafiosi during the night).

#### Game status
При выводе статуса игры можно увидеть всех участников и знаки `[x]` напротив тех, кто был убит.
```
=== GAME STATUS ========:
Your username: Olga
Players:
        [MAFIOSI]  Olga
        []         Katya
        []         Nadya
        []         Sergey       [x]
========================
```

Когда игрока убивают, он переводится в состояние «духа». То есть участвовать в обсуждении он больше не может (сообщения не будут отправляться), но при может следить за ходом игры и видеть роли оставшихся игроков. Выглядит это следующим образом: 

```
=== GAME STATUS ========:
Your username: Sergey
[MAFIOSI]  Olga
[INNOCENT] Katya
[INNOCENT] Nadya
[SHERIFF]  Sergey       [x]
========================
```

Когда игра закончится, к статусу игры добавить приписка о команде победителей: `Winners: TEAM_MAFIA` или `Winners: TEAM_CIVILIANS`.


#### Game end conditions

Игра считается завершенной, когда:

* количество игроков с ролью “мафия” становится равно количеству игроков без роли (мирных жителей)
* количество игроков с ролью “мафия” становится равно нулю.